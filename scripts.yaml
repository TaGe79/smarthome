xaomi_light_switch_off:
  alias: Villanykapcsolo kikapcs
  sequence:
   - condition: numeric_state
     entity_id: input_number.light_button_state
     below: 3
   - service: switch.turn_off
     data_template:
       entity_id: |-
        {% if states.input_number.light_button_state.state | int == 0 -%}
          group.downstairs
        {% elif states.input_number.light_button_state.state | int == 1 -%}
          group.living_room
        {% elif states.input_number.light_button_state.state | int == 2 -%}
          group.kitchen
        {% endif %}

xaomi_light_switch:
  alias: Villanykapcsolo
  sequence:
   - condition: and
     conditions:      
      - condition: numeric_state
        entity_id: input_number.light_button_state
        above: 0
      - condition: numeric_state
        entity_id: input_number.light_button_state
        below: 4
   - service: switch.turn_on
     data_template:
       entity_id: |-
        {% if states.input_number.light_button_state.state | int == 1 -%}
          switch.el2_r1_6
        {% elif states.input_number.light_button_state.state | int == 2 -%}
          switch.nl2_r1_2
        {% elif states.input_number.light_button_state.state | int == 3 -%}
          switch.el2_r1_6
        {% endif %}

ambient_lights_on:
  alias: Ambient lights
  sequence:
  - condition: and 
    conditions:
    - condition: state
      entity_id: 'group.csalad'
      state: 'home'
    - condition: state
      entity_id: 'input_boolean.auto_ambiance_mode'
      state: 'on'
    - condition: template
      value_template: '{{ states.input_select.scene_home.state == "General" }}'
    - condition: state
      entity_id: 'sun.sun'
      state: 'below_horizon'
    - condition: template
      value_template: '{{ states.sensor.lightlevel_18.state | int < states.input_number.ambient_on_below_lux.state | int }}'
  - service: script.turn_on
    entity_id: script.livingroom_ambient_lights_on
  - service: script.turn_on
    entity_id: script.stairs_ambient_lights_on

livingroom_ambient_lights_on:
  alias: Livingroom ambient lights
  sequence:
  - service: light.turn_on
    entity_id: light.livingroom_ceiling
    data_template:
      brightness: '{{ states.input_number.livingroom_ambient_brightness.state | int }}'
      rgb_color: [255,255,255]
  - service: light.turn_on
    entity_id: light.livingroom_wall
    data_template:
      brightness: '{{ states.input_number.livingroom_ambient_brightness.state | int }}'
      rgb_color: [255,255,255]

stairs_ambient_lights_on:
  alias: Stairs ambient light
  sequence:
  - service: light.turn_on
    entity_id: light.stairs_1
    data_template:
      brightness: '{{ states.input_number.stair_ambient_brightness.state | int }}'
  - service: light.turn_on
    entity_id: light.stairs_2
    data_template:
      brightness: '{{ states.input_number.stair_ambient_brightness.state | int }}'